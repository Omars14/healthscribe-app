{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS;IAAG,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,SAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;QAAG,OAAH,QAAA,SAAA,CAAA,KAAuB;;IACxC,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border bg-card text-card-foreground shadow\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,6JAAA,CAAA,aAAgB,MAG3B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,yDACA;QAED,GAAG,KAAK;;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,6JAAA,CAAA,aAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,6JAAA,CAAA,aAAgB,OAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C;QAC1D,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,6JAAA,CAAA,aAAgB,OAGtC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,6JAAA,CAAA,aAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,6JAAA,CAAA,aAAgB,QAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2\",\r\n        sm: \"h-8 rounded-md px-3 text-xs\",\r\n        lg: \"h-10 rounded-md px-8\",\r\n        icon: \"h-9 w-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,ySACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,6JAAA,CAAA,aAAgB,MAC7B,QAA0D;QAAzD,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO;IACtD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport type InputProps = React.InputHTMLAttributes<HTMLInputElement>\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAIA,MAAM,sBAAQ,6JAAA,CAAA,aAAgB,MAC5B,QAAgC;QAA/B,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO;IAC5B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8VACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/lib/direct-upload-service.ts"],"sourcesContent":["import { supabase } from './supabase'\r\nimport { v4 as uuidv4 } from 'uuid'\r\n\r\nexport interface DirectUploadOptions {\r\n  file: File\r\n  userId?: string\r\n  bucketName?: string\r\n}\r\n\r\nexport interface DirectUploadResult {\r\n  publicUrl: string\r\n  path: string\r\n  error?: string\r\n}\r\n\r\n/**\r\n * Upload file directly to Supabase Storage from the client\r\n * This bypasses Vercel's 4.5MB limit\r\n */\r\nexport async function uploadDirectToStorage({\r\n  file,\r\n  userId,\r\n  bucketName = 'audio-files'\r\n}: DirectUploadOptions): Promise<DirectUploadResult> {\r\n  try {\r\n    // Generate unique file name\r\n    const timestamp = Date.now()\r\n    const fileExt = file.name.split('.').pop() || 'mp3'\r\n    const fileName = `${timestamp}-${uuidv4()}.${fileExt}`\r\n    const filePath = userId ? `${userId}/${fileName}` : `anonymous/${fileName}`\r\n    \r\n    console.log('üì§ Uploading directly to Supabase Storage:', filePath)\r\n    \r\n    // Upload directly to Supabase Storage from client\r\n    const { data, error } = await supabase.storage\r\n      .from(bucketName)\r\n      .upload(filePath, file, {\r\n        cacheControl: '3600',\r\n        upsert: false\r\n      })\r\n    \r\n    if (error) {\r\n      console.error('‚ùå Storage upload error:', error)\r\n      \r\n      // Try to create bucket if it doesn't exist\r\n      if (error.message?.includes('bucket') || error.message?.includes('not found')) {\r\n        console.log('ü™£ Bucket might not exist, please create it in Supabase dashboard')\r\n        throw new Error('Storage bucket not configured. Please contact support.')\r\n      }\r\n      \r\n      throw error\r\n    }\r\n    \r\n    // Get public URL for the uploaded file\r\n    const { data: { publicUrl } } = supabase.storage\r\n      .from(bucketName)\r\n      .getPublicUrl(filePath)\r\n    \r\n    console.log('‚úÖ File uploaded successfully:', publicUrl)\r\n    \r\n    return {\r\n      publicUrl,\r\n      path: filePath\r\n    }\r\n  } catch (error) {\r\n    console.error('‚ùå Failed to upload to storage:', error)\r\n    return {\r\n      publicUrl: '',\r\n      path: '',\r\n      error: error instanceof Error ? error.message : 'Upload failed'\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Create a signed URL for private bucket access\r\n */\r\nexport async function createSignedUrl(\r\n  bucketName: string,\r\n  path: string,\r\n  expiresIn: number = 3600\r\n): Promise<string | null> {\r\n  try {\r\n    const { data, error } = await supabase.storage\r\n      .from(bucketName)\r\n      .createSignedUrl(path, expiresIn)\r\n    \r\n    if (error) throw error\r\n    \r\n    return data.signedUrl\r\n  } catch (error) {\r\n    console.error('Failed to create signed URL:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n/**\r\n * Delete a file from storage\r\n */\r\nexport async function deleteFromStorage(\r\n  bucketName: string,\r\n  path: string\r\n): Promise<boolean> {\r\n  try {\r\n    const { error } = await supabase.storage\r\n      .from(bucketName)\r\n      .remove([path])\r\n    \r\n    if (error) throw error\r\n    \r\n    return true\r\n  } catch (error) {\r\n    console.error('Failed to delete from storage:', error)\r\n    return false\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;AAkBO,eAAe,sBAAsB,KAItB;QAJsB,EAC1C,IAAI,EACJ,MAAM,EACN,aAAa,aAAa,EACN,GAJsB;IAK1C,IAAI;QACF,4BAA4B;QAC5B,MAAM,YAAY,KAAK,GAAG;QAC1B,MAAM,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;QAC9C,MAAM,WAAW,AAAC,GAAe,OAAb,WAAU,KAAe,OAAZ,CAAA,GAAA,wLAAA,CAAA,KAAM,AAAD,KAAI,KAAW,OAAR;QAC7C,MAAM,WAAW,SAAS,AAAC,GAAY,OAAV,QAAO,KAAY,OAAT,YAAa,AAAC,aAAqB,OAAT;QAEjE,QAAQ,GAAG,CAAC,8CAA8C;QAE1D,kDAAkD;QAClD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yHAAA,CAAA,WAAQ,CAAC,OAAO,CAC3C,IAAI,CAAC,YACL,MAAM,CAAC,UAAU,MAAM;YACtB,cAAc;YACd,QAAQ;QACV;QAEF,IAAI,OAAO;gBAIL,gBAAqC;YAHzC,QAAQ,KAAK,CAAC,2BAA2B;YAEzC,2CAA2C;YAC3C,IAAI,EAAA,iBAAA,MAAM,OAAO,cAAb,qCAAA,eAAe,QAAQ,CAAC,gBAAa,kBAAA,MAAM,OAAO,cAAb,sCAAA,gBAAe,QAAQ,CAAC,eAAc;gBAC7E,QAAQ,GAAG,CAAC;gBACZ,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM;QACR;QAEA,uCAAuC;QACvC,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,GAAG,yHAAA,CAAA,WAAQ,CAAC,OAAO,CAC7C,IAAI,CAAC,YACL,YAAY,CAAC;QAEhB,QAAQ,GAAG,CAAC,iCAAiC;QAE7C,OAAO;YACL;YACA,MAAM;QACR;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO;YACL,WAAW;YACX,MAAM;YACN,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD;IACF;AACF;AAKO,eAAe,gBACpB,UAAkB,EAClB,IAAY;QACZ,YAAA,iEAAoB;IAEpB,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yHAAA,CAAA,WAAQ,CAAC,OAAO,CAC3C,IAAI,CAAC,YACL,eAAe,CAAC,MAAM;QAEzB,IAAI,OAAO,MAAM;QAEjB,OAAO,KAAK,SAAS;IACvB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;IACT;AACF;AAKO,eAAe,kBACpB,UAAkB,EAClB,IAAY;IAEZ,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yHAAA,CAAA,WAAQ,CAAC,OAAO,CACrC,IAAI,CAAC,YACL,MAAM,CAAC;YAAC;SAAK;QAEhB,IAAI,OAAO,MAAM;QAEjB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 336, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/lib/transcription-service.ts"],"sourcesContent":["import { supabase } from './supabase'\nimport { uploadDirectToStorage } from './direct-upload-service'\n\n// Use optimized endpoint by default\nconst USE_OPTIMIZED_API = true\n\nexport interface TranscriptionRequest {\n  audioFile: File\n  doctorName: string\n  patientName: string\n  documentType: string\n}\n\nexport interface TranscriptionResponse {\n  success: boolean\n  transcriptionId?: string\n  status?: string\n  transcription?: string\n  message?: string\n  error?: string\n}\n\nexport interface TranscriptionStatus {\n  id: string\n  status: 'pending' | 'in_progress' | 'completed' | 'failed'\n  transcription_text?: string\n  audio_url?: string\n  error?: string\n}\n\n/**\n * Submit audio file for transcription via n8n webhook\n * Now uploads directly to Supabase Storage to bypass Vercel's 4.5MB limit\n */\nexport async function submitTranscription(\n  request: TranscriptionRequest\n): Promise<TranscriptionResponse> {\n  try {\n    // Get the current session for user ID\n    const { data: { session } } = await supabase.auth.getSession()\n    const userId = session?.user?.id\n    \n    // Step 1: Upload file directly to Supabase Storage from client\n    // This bypasses Vercel's 4.5MB limit entirely\n    console.log('Uploading file directly to Supabase Storage...')\n    const uploadResult = await uploadDirectToStorage({\n      file: request.audioFile,\n      userId\n    })\n    \n    if (uploadResult.error) {\n      throw new Error(uploadResult.error)\n    }\n    \n    // Step 2: Send only metadata and storage URL to our API\n    // This payload is tiny (just a few KB)\n    const payload = {\n      audioUrl: uploadResult.publicUrl,\n      audioPath: uploadResult.path,\n      fileName: request.audioFile.name,\n      fileSize: request.audioFile.size,\n      fileType: request.audioFile.type,\n      doctorName: request.doctorName,\n      patientName: request.patientName,\n      documentType: request.documentType\n    }\n    \n    const endpoint = USE_OPTIMIZED_API ? '/api/transcribe-optimized' : '/api/transcribe'\n    const headers: HeadersInit = {\n      'Content-Type': 'application/json'\n    }\n    \n    if (session?.access_token) {\n      headers['Authorization'] = `Bearer ${session.access_token}`\n    }\n    \n    const response = await fetch(endpoint, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(payload),\n    })\n\n    const data = await response.json()\n\n    if (!response.ok) {\n      throw new Error(data.error || 'Failed to submit transcription')\n    }\n\n    return data\n  } catch (error) {\n    console.error('Transcription submission error:', error)\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to submit transcription',\n      message: 'Please try again or contact support if the issue persists'\n    }\n  }\n}\n\n/**\n * Check the status of a transcription\n */\nexport async function checkTranscriptionStatus(\n  transcriptionId: string\n): Promise<TranscriptionStatus | null> {\n  try {\n    const { data, error } = await supabase\n      .from('transcriptions')\n      .select('id, status, transcription_text, audio_url, error')\n      .eq('id', transcriptionId)\n      .single()\n\n    if (error) {\n      console.error('Status check error:', error)\n      return null\n    }\n\n    return data as TranscriptionStatus\n  } catch (error) {\n    console.error('Failed to check transcription status:', error)\n    return null\n  }\n}\n\n/**\n * Poll for transcription completion\n */\nexport async function pollTranscriptionStatus(\n  transcriptionId: string,\n  onUpdate?: (status: TranscriptionStatus) => void,\n  maxAttempts: number = 60,\n  intervalMs: number = 5000\n): Promise<TranscriptionStatus | null> {\n  let attempts = 0\n\n  return new Promise((resolve) => {\n    const interval = setInterval(async () => {\n      attempts++\n\n      const status = await checkTranscriptionStatus(transcriptionId)\n\n      if (status) {\n        if (onUpdate) {\n          onUpdate(status)\n        }\n\n        if (status.status === 'completed' || status.status === 'failed') {\n          clearInterval(interval)\n          resolve(status)\n          return\n        }\n      }\n\n      if (attempts >= maxAttempts) {\n        clearInterval(interval)\n        resolve(null)\n      }\n    }, intervalMs)\n  })\n}\n\n/**\n * Format file size for display\n */\nexport function formatFileSize(bytes: number | null | undefined): string {\n  if (!bytes || bytes === 0) return '-'\n  \n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  \n  return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i]\n}\n\n/**\n * Validate audio file\n */\nexport function validateAudioFile(file: File): { valid: boolean; error?: string } {\n  const MAX_SIZE = 100 * 1024 * 1024 // 100MB\n  const ALLOWED_TYPES = [\n    'audio/mpeg',\n    'audio/wav',\n    'audio/webm',\n    'audio/ogg',\n    'audio/mp4',\n    'audio/m4a',\n    'audio/x-m4a',\n    'audio/mp3',\n    'audio/x-wav',\n    'audio/wave'\n  ]\n\n  if (file.size > MAX_SIZE) {\n    return {\n      valid: false,\n      error: `File size exceeds maximum of ${formatFileSize(MAX_SIZE)}`\n    }\n  }\n\n  if (!ALLOWED_TYPES.includes(file.type) && !file.name.match(/\\.(mp3|wav|m4a|ogg|webm|mp4)$/i)) {\n    return {\n      valid: false,\n      error: 'Invalid audio format. Please upload MP3, WAV, M4A, OGG, or WebM files'\n    }\n  }\n\n  return { valid: true }\n}\n\n/**\n * Extract audio duration (requires browser audio API)\n */\nexport async function getAudioDuration(file: File): Promise<number> {\n  return new Promise((resolve, reject) => {\n    const audio = new Audio()\n    const objectUrl = URL.createObjectURL(file)\n\n    audio.addEventListener('loadedmetadata', () => {\n      URL.revokeObjectURL(objectUrl)\n      resolve(audio.duration)\n    })\n\n    audio.addEventListener('error', () => {\n      URL.revokeObjectURL(objectUrl)\n      reject(new Error('Failed to load audio file'))\n    })\n\n    audio.src = objectUrl\n  })\n}\n\n/**\n * Format duration for display\n */\nexport function formatDuration(seconds: number): string {\n  const hours = Math.floor(seconds / 3600)\n  const minutes = Math.floor((seconds % 3600) / 60)\n  const secs = Math.floor(seconds % 60)\n\n  if (hours > 0) {\n    return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n  }\n  return `${minutes}:${secs.toString().padStart(2, '0')}`\n}\n\n/**\n * Subscribe to real-time transcription status updates via SSE\n */\nexport async function subscribeToTranscriptionStatus(\n  transcriptionId: string,\n  onUpdate: (event: TranscriptionStatus) => void,\n  onError?: (error: Error | Event) => void,\n  onComplete?: () => void\n): Promise<() => void> {\n  try {\n    const { data: { session } } = await supabase.auth.getSession()\n\n    if (!session?.access_token) {\n      const error = new Error('No authentication token available')\n      if (onError) onError(error)\n      return () => {} // Return empty cleanup function\n    }\n\n    const token = encodeURIComponent(session.access_token)\n    const eventSource = new EventSource(`/api/transcription-status?id=${transcriptionId}&token=${token}`)\n  \n    eventSource.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data)\n\n        if (data.type === 'status') {\n          onUpdate(data.data)\n        } else if (data.type === 'complete') {\n          if (onComplete) onComplete()\n          eventSource.close()\n        } else if (data.type === 'error' || data.type === 'timeout') {\n          if (onError) onError(data)\n          eventSource.close()\n        }\n      } catch (error) {\n        console.error('SSE parse error:', error)\n        if (onError) onError(error instanceof Error ? error : new Error(String(error)))\n      }\n    }\n\n    eventSource.onerror = (error) => {\n      console.error('SSE connection error:', error)\n      if (onError) onError(error)\n      eventSource.close()\n    }\n\n    // Return cleanup function\n    return () => {\n      eventSource.close()\n    }\n  } catch (error) {\n    console.error('Failed to create EventSource connection:', error)\n\n    // Fallback to polling if EventSource fails\n    console.log('üîÑ Falling back to polling for transcription status updates')\n    return pollTranscriptionStatus(transcriptionId, onUpdate, 60, 2000) as any\n  }\n}\n\n/**\n * Submit transcription with real-time status updates\n */\nexport async function submitTranscriptionWithUpdates(\n  request: TranscriptionRequest,\n  onStatusUpdate?: (status: TranscriptionStatus) => void\n): Promise<TranscriptionResponse> {\n  try {\n    // Submit the transcription\n    const response = await submitTranscription(request)\n\n    if (response.success && response.transcriptionId) {\n      // Subscribe to status updates\n      const unsubscribe = await subscribeToTranscriptionStatus(\n        response.transcriptionId,\n        (status) => {\n          if (onStatusUpdate) {\n            onStatusUpdate(status)\n          }\n        },\n        (error) => {\n          console.error('Status update error:', error)\n        },\n        () => {\n          console.log('Transcription complete')\n        }\n      )\n\n      // Store unsubscribe function for later cleanup if needed\n      const responseWithUnsubscribe = response as TranscriptionResponse & { unsubscribe?: () => void }\n      responseWithUnsubscribe.unsubscribe = unsubscribe\n    }\n\n    return response\n  } catch (error) {\n    console.error('Submit with updates error:', error)\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to submit transcription',\n      message: 'Please try again'\n    }\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 593, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/lib/supabase-api.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\nimport { NextRequest } from 'next/server'\r\n\r\n// Create a Supabase client for server-side use\r\nexport function createServerClient() {\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || ''\r\n  const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || ''\r\n  \r\n  if (!supabaseUrl || !supabaseServiceKey) {\r\n    // Return a dummy client during build time\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      return null as any\r\n    }\r\n    throw new Error('Missing Supabase environment variables')\r\n  }\r\n  \r\n  return createClient(supabaseUrl, supabaseServiceKey, {\r\n    auth: {\r\n      autoRefreshToken: false,\r\n      persistSession: false\r\n    }\r\n  })\r\n}\r\n\r\n// Get authenticated user from request\r\nexport async function getAuthenticatedUser(request: NextRequest) {\r\n  const supabase = createServerClient()\r\n  \r\n  // Get the authorization header\r\n  const authHeader = request.headers.get('authorization')\r\n  \r\n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n    // Try to get token from cookies if no auth header\r\n    const cookieHeader = request.headers.get('cookie')\r\n    if (!cookieHeader) {\r\n      return null\r\n    }\r\n    \r\n    // Parse cookies manually\r\n    const cookies = Object.fromEntries(\r\n      cookieHeader.split('; ').map(c => {\r\n        const [key, ...rest] = c.split('=')\r\n        return [key, rest.join('=')]\r\n      })\r\n    )\r\n    \r\n    const token = cookies['sb-access-token']\r\n    \r\n    if (!token) {\r\n      return null\r\n    }\r\n    \r\n    const { data: { user }, error } = await supabase.auth.getUser(token)\r\n    return error ? null : user\r\n  }\r\n  \r\n  const token = authHeader.replace('Bearer ', '')\r\n  const { data: { user }, error } = await supabase.auth.getUser(token)\r\n  \r\n  return error ? null : user\r\n}\r\n\r\n// Create a Supabase client with user context for API routes\r\nexport async function createAuthenticatedClient(request: NextRequest) {\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || ''\r\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || ''\r\n  \r\n  if (!supabaseUrl || !supabaseAnonKey) {\r\n    // Return a dummy client during build time\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      return null as any\r\n    }\r\n    throw new Error('Missing Supabase environment variables')\r\n  }\r\n  \r\n  // Get the authorization header\r\n  const authHeader = request.headers.get('authorization')\r\n  let token: string | undefined\r\n  \r\n  if (authHeader && authHeader.startsWith('Bearer ')) {\r\n    token = authHeader.replace('Bearer ', '')\r\n  } else {\r\n    // Try to get token from cookies if no auth header\r\n    const cookieHeader = request.headers.get('cookie')\r\n    if (cookieHeader) {\r\n      // Parse cookies manually\r\n      const cookies = Object.fromEntries(\r\n        cookieHeader.split('; ').map(c => {\r\n          const [key, ...rest] = c.split('=')\r\n          return [key, rest.join('=')]\r\n        })\r\n      )\r\n      token = cookies['sb-access-token']\r\n    }\r\n  }\r\n  \r\n  const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n      autoRefreshToken: false,\r\n      persistSession: false\r\n    },\r\n    global: {\r\n      headers: token ? {\r\n        Authorization: `Bearer ${token}`\r\n      } : {}\r\n    }\r\n  })\r\n  \r\n  return supabase\r\n}\r\n"],"names":[],"mappings":";;;;;AAKsB;AALtB;;AAIO,SAAS;IACd,MAAM,cAAc,gFAAwC;IAC5D,MAAM,qBAAqB,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,yBAAyB,IAAI;IAEpE,IAAI,CAAC,eAAe,CAAC,oBAAoB;QACvC,0CAA0C;QAC1C,wCAA2C;YACzC,OAAO;QACT;;;IAEF;IAEA,OAAO,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa,oBAAoB;QACnD,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;IACF;AACF;AAGO,eAAe,qBAAqB,OAAoB;IAC7D,MAAM,WAAW;IAEjB,+BAA+B;IAC/B,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IAEvC,IAAI,CAAC,cAAc,CAAC,WAAW,UAAU,CAAC,YAAY;QACpD,kDAAkD;QAClD,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC;QACzC,IAAI,CAAC,cAAc;YACjB,OAAO;QACT;QAEA,yBAAyB;QACzB,MAAM,UAAU,OAAO,WAAW,CAChC,aAAa,KAAK,CAAC,MAAM,GAAG,CAAC,CAAA;YAC3B,MAAM,CAAC,KAAK,GAAG,KAAK,GAAG,EAAE,KAAK,CAAC;YAC/B,OAAO;gBAAC;gBAAK,KAAK,IAAI,CAAC;aAAK;QAC9B;QAGF,MAAM,QAAQ,OAAO,CAAC,kBAAkB;QAExC,IAAI,CAAC,OAAO;YACV,OAAO;QACT;QAEA,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO,CAAC;QAC9D,OAAO,QAAQ,OAAO;IACxB;IAEA,MAAM,QAAQ,WAAW,OAAO,CAAC,WAAW;IAC5C,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO,CAAC;IAE9D,OAAO,QAAQ,OAAO;AACxB;AAGO,eAAe,0BAA0B,OAAoB;IAClE,MAAM,cAAc,gFAAwC;IAC5D,MAAM,kBAAkB,wPAA6C;IAErE;;IAQA,+BAA+B;IAC/B,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IACvC,IAAI;IAEJ,IAAI,cAAc,WAAW,UAAU,CAAC,YAAY;QAClD,QAAQ,WAAW,OAAO,CAAC,WAAW;IACxC,OAAO;QACL,kDAAkD;QAClD,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC;QACzC,IAAI,cAAc;YAChB,yBAAyB;YACzB,MAAM,UAAU,OAAO,WAAW,CAChC,aAAa,KAAK,CAAC,MAAM,GAAG,CAAC,CAAA;gBAC3B,MAAM,CAAC,KAAK,GAAG,KAAK,GAAG,EAAE,KAAK,CAAC;gBAC/B,OAAO;oBAAC;oBAAK,KAAK,IAAI,CAAC;iBAAK;YAC9B;YAEF,QAAQ,OAAO,CAAC,kBAAkB;QACpC;IACF;IAEA,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;QAC1D,MAAM;YACJ,kBAAkB;YAClB,gBAAgB;QAClB;QACA,QAAQ;YACN,SAAS,QAAQ;gBACf,eAAe,AAAC,UAAe,OAAN;YAC3B,IAAI,CAAC;QACP;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 695, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/lib/storage-service.ts"],"sourcesContent":["import { createServerClient } from './supabase-api'\r\nimport { supabase } from './supabase'\r\n\r\nconst AUDIO_BUCKET = 'audio-files'\r\n\r\n/**\r\n * Upload audio file to Supabase Storage\r\n * @param file The audio file to upload\r\n * @param transcriptionId The ID of the transcription record\r\n * @returns The public URL of the uploaded file\r\n */\r\nexport async function uploadAudioToStorage(\r\n  file: File | Buffer,\r\n  transcriptionId: string,\r\n  fileName?: string\r\n): Promise<{ url: string | null; error: string | null }> {\r\n  try {\r\n    // Determine file extension\r\n    const extension = fileName ? fileName.split('.').pop() : 'mp3'\r\n    const filePath = `uploads/${transcriptionId}.${extension}`\r\n    \r\n    // Convert File to ArrayBuffer if needed\r\n    let fileData: ArrayBuffer | Buffer\r\n    if (file instanceof File) {\r\n      fileData = await file.arrayBuffer()\r\n    } else {\r\n      fileData = file\r\n    }\r\n    \r\n    // Upload to Supabase Storage\r\n    const { data, error } = await supabase.storage\r\n      .from(AUDIO_BUCKET)\r\n      .upload(filePath, fileData, {\r\n        contentType: file instanceof File ? file.type : 'audio/mpeg',\r\n        cacheControl: '3600',\r\n        upsert: true\r\n      })\r\n    \r\n    if (error) {\r\n      console.error('Storage upload error:', error)\r\n      return { url: null, error: error.message }\r\n    }\r\n    \r\n    // Get public URL\r\n    const { data: { publicUrl } } = supabase.storage\r\n      .from(AUDIO_BUCKET)\r\n      .getPublicUrl(filePath)\r\n    \r\n    return { url: publicUrl, error: null }\r\n  } catch (error) {\r\n    console.error('Upload error:', error)\r\n    return { \r\n      url: null, \r\n      error: error instanceof Error ? error.message : 'Failed to upload audio file' \r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Upload audio file server-side using service role\r\n */\r\nexport async function uploadAudioServerSide(\r\n  file: Buffer,\r\n  transcriptionId: string,\r\n  fileName: string,\r\n  contentType: string = 'audio/mpeg'\r\n): Promise<{ url: string | null; error: string | null }> {\r\n  try {\r\n    const supabase = createServerClient()\r\n    \r\n    // Determine file extension\r\n    const extension = fileName.split('.').pop() || 'mp3'\r\n    const filePath = `uploads/${transcriptionId}.${extension}`\r\n    \r\n    // Upload to Supabase Storage\r\n    const { data, error } = await supabase.storage\r\n      .from(AUDIO_BUCKET)\r\n      .upload(filePath, file, {\r\n        contentType,\r\n        cacheControl: '3600',\r\n        upsert: true\r\n      })\r\n    \r\n    if (error) {\r\n      console.error('Server storage upload error:', error)\r\n      return { url: null, error: error.message }\r\n    }\r\n    \r\n    // Get public URL\r\n    const { data: { publicUrl } } = supabase.storage\r\n      .from(AUDIO_BUCKET)\r\n      .getPublicUrl(filePath)\r\n    \r\n    return { url: publicUrl, error: null }\r\n  } catch (error) {\r\n    console.error('Server upload error:', error)\r\n    return { \r\n      url: null, \r\n      error: error instanceof Error ? error.message : 'Failed to upload audio file' \r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Get a signed URL for private audio file access\r\n */\r\nexport async function getSignedAudioUrl(\r\n  filePath: string,\r\n  expiresIn: number = 3600\r\n): Promise<{ url: string | null; error: string | null }> {\r\n  try {\r\n    const { data, error } = await supabase.storage\r\n      .from(AUDIO_BUCKET)\r\n      .createSignedUrl(filePath, expiresIn)\r\n    \r\n    if (error) {\r\n      console.error('Signed URL error:', error)\r\n      return { url: null, error: error.message }\r\n    }\r\n    \r\n    return { url: data.signedUrl, error: null }\r\n  } catch (error) {\r\n    console.error('Get signed URL error:', error)\r\n    return { \r\n      url: null, \r\n      error: error instanceof Error ? error.message : 'Failed to get signed URL' \r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Delete audio file from storage\r\n */\r\nexport async function deleteAudioFromStorage(\r\n  filePath: string\r\n): Promise<{ success: boolean; error: string | null }> {\r\n  try {\r\n    const { error } = await supabase.storage\r\n      .from(AUDIO_BUCKET)\r\n      .remove([filePath])\r\n    \r\n    if (error) {\r\n      console.error('Delete error:', error)\r\n      return { success: false, error: error.message }\r\n    }\r\n    \r\n    return { success: true, error: null }\r\n  } catch (error) {\r\n    console.error('Delete audio error:', error)\r\n    return { \r\n      success: false, \r\n      error: error instanceof Error ? error.message : 'Failed to delete audio file' \r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Check if storage bucket exists and create if not\r\n */\r\nexport async function ensureStorageBucket(): Promise<{ exists: boolean; error: string | null }> {\r\n  try {\r\n    const { data: buckets, error: listError } = await supabase.storage.listBuckets()\r\n    \r\n    if (listError) {\r\n      // If we can't list buckets, we might not have permission\r\n      // Try to upload a test file instead\r\n      const testFile = new Uint8Array([1, 2, 3])\r\n      const { error: uploadError } = await supabase.storage\r\n        .from(AUDIO_BUCKET)\r\n        .upload('test.txt', testFile, { upsert: true })\r\n      \r\n      if (uploadError && uploadError.message.includes('Bucket not found')) {\r\n        return { exists: false, error: 'Storage bucket does not exist' }\r\n      }\r\n      \r\n      // Clean up test file if it uploaded successfully\r\n      if (!uploadError) {\r\n        await supabase.storage.from(AUDIO_BUCKET).remove(['test.txt'])\r\n      }\r\n      \r\n      return { exists: true, error: null }\r\n    }\r\n    \r\n    const bucketExists = buckets?.some(b => b.name === AUDIO_BUCKET)\r\n    \r\n    if (!bucketExists) {\r\n      return { exists: false, error: 'Storage bucket does not exist' }\r\n    }\r\n    \r\n    return { exists: true, error: null }\r\n  } catch (error) {\r\n    console.error('Check bucket error:', error)\r\n    return { \r\n      exists: false, \r\n      error: error instanceof Error ? error.message : 'Failed to check storage bucket' \r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 886, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,6JAAA,CAAA,aAAgB,MAI5B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,oKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;;AAGb,MAAM,WAAW,GAAG,oKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 928, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1164, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Progress = React.forwardRef<\r\n  React.ElementRef<typeof ProgressPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\r\n>(({ className, value, ...props }, ref) => (\r\n  <ProgressPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ProgressPrimitive.Indicator\r\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\r\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\r\n    />\r\n  </ProgressPrimitive.Root>\r\n))\r\nProgress.displayName = ProgressPrimitive.Root.displayName\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,6JAAA,CAAA,aAAgB,MAG/B,QAAiC;QAAhC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO;yBAC/B,6LAAC,uKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,uKAAA,CAAA,YAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,AAAC,eAAiC,OAAnB,MAAM,CAAC,SAAS,CAAC,GAAE;YAAI;;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,uKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1213, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/components/ui/use-toast.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: React.ReactNode\r\n  variant?: \"default\" | \"destructive\"\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: \"ADD_TOAST\",\r\n  UPDATE_TOAST: \"UPDATE_TOAST\",\r\n  DISMISS_TOAST: \"DISMISS_TOAST\",\r\n  REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType[\"ADD_TOAST\"]\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType[\"UPDATE_TOAST\"]\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType[\"DISMISS_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n  | {\r\n      type: ActionType[\"REMOVE_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: \"REMOVE_TOAST\",\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case \"UPDATE_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n        ),\r\n      }\r\n\r\n    case \"DISMISS_TOAST\": {\r\n      const { toastId } = action\r\n\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n              }\r\n            : t\r\n        ),\r\n      }\r\n    }\r\n    case \"REMOVE_TOAST\":\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: \"UPDATE_TOAST\",\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\r\n\r\n  dispatch({\r\n    type: \"ADD_TOAST\",\r\n    toast: {\r\n      ...props,\r\n      id,\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n"],"names":[],"mappings":";;;;;AAEA;;AAFA;;AAIA,MAAM,cAAc;AACpB,MAAM,qBAAqB;AAU3B,MAAM,cAAc;IAClB,WAAW;IACX,cAAc;IACd,eAAe;IACf,cAAc;AAChB;AAEA,IAAI,QAAQ;AAEZ,SAAS;IACP,QAAQ,CAAC,QAAQ,CAAC,IAAI,OAAO,gBAAgB;IAC7C,OAAO,MAAM,QAAQ;AACvB;AA0BA,MAAM,gBAAgB,IAAI;AAE1B,MAAM,mBAAmB,CAAC;IACxB,IAAI,cAAc,GAAG,CAAC,UAAU;QAC9B;IACF;IAEA,MAAM,UAAU,WAAW;QACzB,cAAc,MAAM,CAAC;QACrB,SAAS;YACP,MAAM;YACN,SAAS;QACX;IACF,GAAG;IAEH,cAAc,GAAG,CAAC,SAAS;AAC7B;AAEO,MAAM,UAAU,CAAC,OAAc;IACpC,OAAQ,OAAO,IAAI;QACjB,KAAK;YACH,OAAO;gBACL,GAAG,KAAK;gBACR,QAAQ;oBAAC,OAAO,KAAK;uBAAK,MAAM,MAAM;iBAAC,CAAC,KAAK,CAAC,GAAG;YACnD;QAEF,KAAK;YACH,OAAO;gBACL,GAAG,KAAK;gBACR,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IACxB,EAAE,EAAE,KAAK,OAAO,KAAK,CAAC,EAAE,GAAG;wBAAE,GAAG,CAAC;wBAAE,GAAG,OAAO,KAAK;oBAAC,IAAI;YAE3D;QAEF,KAAK;YAAiB;gBACpB,MAAM,EAAE,OAAO,EAAE,GAAG;gBAEpB,IAAI,SAAS;oBACX,iBAAiB;gBACnB,OAAO;oBACL,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC;wBACpB,iBAAiB,MAAM,EAAE;oBAC3B;gBACF;gBAEA,OAAO;oBACL,GAAG,KAAK;oBACR,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IACxB,EAAE,EAAE,KAAK,WAAW,YAAY,YAC5B;4BACE,GAAG,CAAC;wBACN,IACA;gBAER;YACF;QACA,KAAK;YACH,IAAI,OAAO,OAAO,KAAK,WAAW;gBAChC,OAAO;oBACL,GAAG,KAAK;oBACR,QAAQ,EAAE;gBACZ;YACF;YACA,OAAO;gBACL,GAAG,KAAK;gBACR,QAAQ,MAAM,MAAM,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO,OAAO;YAC5D;IACJ;AACF;AAEA,MAAM,YAA2C,EAAE;AAEnD,IAAI,cAAqB;IAAE,QAAQ,EAAE;AAAC;AAEtC,SAAS,SAAS,MAAc;IAC9B,cAAc,QAAQ,aAAa;IACnC,UAAU,OAAO,CAAC,CAAC;QACjB,SAAS;IACX;AACF;AAIA,SAAS,MAAM,KAAmB;QAAnB,EAAE,GAAG,OAAc,GAAnB;IACb,MAAM,KAAK;IAEX,MAAM,SAAS,CAAC,QACd,SAAS;YACP,MAAM;YACN,OAAO;gBAAE,GAAG,KAAK;gBAAE;YAAG;QACxB;IACF,MAAM,UAAU,IAAM,SAAS;YAAE,MAAM;YAAiB,SAAS;QAAG;IAEpE,SAAS;QACP,MAAM;QACN,OAAO;YACL,GAAG,KAAK;YACR;QACF;IACF;IAEA,OAAO;QACL,IAAI;QACJ;QACA;IACF;AACF;AAEA,SAAS;;IACP,MAAM,CAAC,OAAO,SAAS,GAAG,6JAAA,CAAA,WAAc,CAAQ;IAEhD,6JAAA,CAAA,YAAe;8BAAC;YACd,UAAU,IAAI,CAAC;YACf;sCAAO;oBACL,MAAM,QAAQ,UAAU,OAAO,CAAC;oBAChC,IAAI,QAAQ,CAAC,GAAG;wBACd,UAAU,MAAM,CAAC,OAAO;oBAC1B;gBACF;;QACF;6BAAG;QAAC;KAAM;IAEV,OAAO;QACL,GAAG,KAAK;QACR;QACA,SAAS,CAAC,UAAqB,SAAS;gBAAE,MAAM;gBAAiB;YAAQ;IAC3E;AACF;GAlBS","debugId":null}},
    {"offset": {"line": 1372, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/components/bulk-upload-modal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useRef } from 'react'\r\nimport { \r\n  Upload, \r\n  X, \r\n  FileAudio, \r\n  CheckCircle, \r\n  AlertCircle, \r\n  Loader2,\r\n  PlayCircle,\r\n  PauseCircle,\r\n  RotateCcw\r\n} from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\r\nimport { Progress } from '@/components/ui/progress'\r\nimport { useToast } from '@/components/ui/use-toast'\r\nimport { supabase } from '@/lib/supabase'\r\n\r\ninterface FileUploadItem {\r\n  id: string\r\n  file: File\r\n  doctorName: string\r\n  patientName: string\r\n  documentType: string\r\n  status: 'pending' | 'uploading' | 'processing' | 'completed' | 'failed'\r\n  progress: number\r\n  error?: string\r\n  transcriptionId?: string\r\n}\r\n\r\ninterface BulkUploadModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onComplete?: () => void\r\n}\r\n\r\nexport function BulkUploadModal({ isOpen, onClose, onComplete }: BulkUploadModalProps) {\r\n  const [files, setFiles] = useState<FileUploadItem[]>([])\r\n  const [defaultDoctorName, setDefaultDoctorName] = useState('')\r\n  const [defaultDocumentType, setDefaultDocumentType] = useState('consultation')\r\n  const [isProcessing, setIsProcessing] = useState(false)\r\n  const [currentProcessingIndex, setCurrentProcessingIndex] = useState(-1)\r\n  \r\n  const fileInputRef = useRef<HTMLInputElement>(null)\r\n  const abortControllerRef = useRef<AbortController | null>(null)\r\n  const { toast } = useToast()\r\n\r\n  const documentTypes = [\r\n    { value: 'consultation', label: 'Consultation Note' },\r\n    { value: 'surgery', label: 'Surgery Report' },\r\n    { value: 'discharge', label: 'Discharge Summary' },\r\n    { value: 'progress', label: 'Progress Note' },\r\n    { value: 'radiology', label: 'Radiology Report' },\r\n    { value: 'pathology', label: 'Pathology Report' }\r\n  ]\r\n\r\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const selectedFiles = event.target.files\r\n    if (!selectedFiles) return\r\n\r\n    const newFiles: FileUploadItem[] = []\r\n    \r\n    for (let i = 0; i < selectedFiles.length; i++) {\r\n      const file = selectedFiles[i]\r\n      \r\n      // Validate file type\r\n      const validTypes = ['audio/mpeg', 'audio/wav', 'audio/webm', 'audio/ogg', 'audio/mp4', 'audio/m4a', 'audio/x-m4a']\r\n      if (!validTypes.includes(file.type) && !file.name.match(/\\.(mp3|wav|m4a|ogg|webm|mp4)$/i)) {\r\n        toast({\r\n          title: 'Invalid file type',\r\n          description: `${file.name} is not a valid audio file`,\r\n          variant: 'destructive'\r\n        })\r\n        continue\r\n      }\r\n\r\n      // Validate file size (max 100MB)\r\n      const maxSize = 100 * 1024 * 1024\r\n      if (file.size > maxSize) {\r\n        toast({\r\n          title: 'File too large',\r\n          description: `${file.name} exceeds 100MB limit`,\r\n          variant: 'destructive'\r\n        })\r\n        continue\r\n      }\r\n\r\n      // Extract patient name from filename (if formatted like \"PatientName_DoctorName_Date.mp3\")\r\n      let patientName = ''\r\n      const fileNameWithoutExt = file.name.replace(/\\.[^/.]+$/, '')\r\n      const parts = fileNameWithoutExt.split('_')\r\n      if (parts.length > 0) {\r\n        patientName = parts[0].replace(/([A-Z])/g, ' $1').trim()\r\n      }\r\n\r\n      newFiles.push({\r\n        id: `${Date.now()}-${i}`,\r\n        file,\r\n        doctorName: defaultDoctorName,\r\n        patientName: patientName || fileNameWithoutExt,\r\n        documentType: defaultDocumentType,\r\n        status: 'pending',\r\n        progress: 0\r\n      })\r\n    }\r\n\r\n    setFiles(prev => [...prev, ...newFiles])\r\n    \r\n    // Reset file input\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = ''\r\n    }\r\n  }\r\n\r\n  const updateFileField = (id: string, field: keyof FileUploadItem, value: any) => {\r\n    setFiles(prev => prev.map(f => \r\n      f.id === id ? { ...f, [field]: value } : f\r\n    ))\r\n  }\r\n\r\n  const removeFile = (id: string) => {\r\n    setFiles(prev => prev.filter(f => f.id !== id))\r\n  }\r\n\r\n  const uploadSingleFile = async (fileItem: FileUploadItem): Promise<void> => {\r\n    try {\r\n      // Update status to uploading\r\n      updateFileField(fileItem.id, 'status', 'uploading')\r\n      updateFileField(fileItem.id, 'progress', 20)\r\n\r\n      // Get current user\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      if (!user) throw new Error('User not authenticated')\r\n\r\n      // Generate unique filename\r\n      const timestamp = Date.now()\r\n      const randomId = Math.random().toString(36).substring(7)\r\n      const fileExt = fileItem.file.name.split('.').pop()\r\n      const fileName = `${timestamp}-${randomId}.${fileExt}`\r\n      const filePath = `${user.id}/${fileName}`\r\n\r\n      // Upload to Supabase storage\r\n      updateFileField(fileItem.id, 'progress', 40)\r\n      const { data: uploadData, error: uploadError } = await supabase.storage\r\n        .from('audio-files')\r\n        .upload(filePath, fileItem.file)\r\n\r\n      if (uploadError) throw uploadError\r\n\r\n      // Get public URL\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('audio-files')\r\n        .getPublicUrl(filePath)\r\n\r\n      // Create transcription record\r\n      updateFileField(fileItem.id, 'progress', 60)\r\n      const { data: transcription, error: dbError } = await supabase\r\n        .from('transcriptions')\r\n        .insert({\r\n          user_id: user.id,\r\n          file_name: fileItem.file.name,\r\n          doctor_name: fileItem.doctorName,\r\n          patient_name: fileItem.patientName,\r\n          document_type: fileItem.documentType,\r\n          audio_url: publicUrl,\r\n          status: 'pending',\r\n          created_at: new Date().toISOString()\r\n        })\r\n        .select()\r\n        .single()\r\n\r\n      if (dbError) throw dbError\r\n\r\n      // Send to n8n webhook for processing\r\n      updateFileField(fileItem.id, 'status', 'processing')\r\n      updateFileField(fileItem.id, 'progress', 80)\r\n      \r\n      const webhookPayload = {\r\n        uploadId: transcription.id,\r\n        doctorName: fileItem.doctorName,\r\n        patientName: fileItem.patientName,\r\n        documentType: fileItem.documentType,\r\n        fileName: fileItem.file.name,\r\n        audioUrl: publicUrl,\r\n        source: 'bulk-upload',\r\n        callbackUrl: `${window.location.origin}/api/transcription-result-v2`\r\n      }\r\n\r\n      // Use the n8n cloud webhook URL from environment variables\r\n      const webhookUrl = process.env.NEXT_PUBLIC_N8N_WEBHOOK_URL || 'https://project6.app.n8n.cloud/webhook/medical-transcribe-v2'\r\n      const webhookResponse = await fetch(webhookUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-Source': 'bulk-upload'\r\n        },\r\n        body: JSON.stringify(webhookPayload)\r\n      })\r\n\r\n      if (!webhookResponse.ok) {\r\n        console.error('Webhook failed:', await webhookResponse.text())\r\n        // Don't throw error, transcription will process eventually\r\n      }\r\n\r\n      // Mark as completed\r\n      updateFileField(fileItem.id, 'status', 'completed')\r\n      updateFileField(fileItem.id, 'progress', 100)\r\n      updateFileField(fileItem.id, 'transcriptionId', transcription.id)\r\n\r\n    } catch (error) {\r\n      console.error(`Failed to upload ${fileItem.file.name}:`, error)\r\n      updateFileField(fileItem.id, 'status', 'failed')\r\n      updateFileField(fileItem.id, 'error', error instanceof Error ? error.message : 'Upload failed')\r\n      throw error\r\n    }\r\n  }\r\n\r\n  const startBulkUpload = async () => {\r\n    if (files.length === 0) {\r\n      toast({\r\n        title: 'No files selected',\r\n        description: 'Please select files to upload',\r\n        variant: 'destructive'\r\n      })\r\n      return\r\n    }\r\n\r\n    // Validate all files have required fields\r\n    const invalidFiles = files.filter(f => !f.doctorName || !f.patientName || !f.documentType)\r\n    if (invalidFiles.length > 0) {\r\n      toast({\r\n        title: 'Missing information',\r\n        description: 'Please fill in all required fields for each file',\r\n        variant: 'destructive'\r\n      })\r\n      return\r\n    }\r\n\r\n    setIsProcessing(true)\r\n    abortControllerRef.current = new AbortController()\r\n\r\n    let successCount = 0\r\n    let failCount = 0\r\n\r\n    for (let i = 0; i < files.length; i++) {\r\n      if (abortControllerRef.current?.signal.aborted) break\r\n      \r\n      const file = files[i]\r\n      if (file.status === 'completed') continue\r\n\r\n      setCurrentProcessingIndex(i)\r\n      \r\n      try {\r\n        await uploadSingleFile(file)\r\n        successCount++\r\n      } catch (error) {\r\n        failCount++\r\n      }\r\n    }\r\n\r\n    setIsProcessing(false)\r\n    setCurrentProcessingIndex(-1)\r\n\r\n    // Show summary\r\n    toast({\r\n      title: 'Bulk upload complete',\r\n      description: `${successCount} files uploaded successfully${failCount > 0 ? `, ${failCount} failed` : ''}`,\r\n      variant: failCount > 0 ? 'destructive' : 'default'\r\n    })\r\n\r\n    if (successCount > 0 && onComplete) {\r\n      onComplete()\r\n    }\r\n  }\r\n\r\n  const cancelUpload = () => {\r\n    if (abortControllerRef.current) {\r\n      abortControllerRef.current.abort()\r\n    }\r\n    setIsProcessing(false)\r\n    setCurrentProcessingIndex(-1)\r\n  }\r\n\r\n  const retryFailed = async () => {\r\n    const failedFiles = files.filter(f => f.status === 'failed')\r\n    if (failedFiles.length === 0) return\r\n\r\n    // Reset failed files to pending\r\n    failedFiles.forEach(f => {\r\n      updateFileField(f.id, 'status', 'pending')\r\n      updateFileField(f.id, 'progress', 0)\r\n      updateFileField(f.id, 'error', undefined)\r\n    })\r\n\r\n    await startBulkUpload()\r\n  }\r\n\r\n  const completedCount = files.filter(f => f.status === 'completed').length\r\n  const failedCount = files.filter(f => f.status === 'failed').length\r\n  const totalProgress = files.length > 0 \r\n    ? Math.round(files.reduce((acc, f) => acc + f.progress, 0) / files.length)\r\n    : 0\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"p-6 border-b flex justify-between items-center\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Bulk Upload Transcriptions</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">Upload multiple audio files for transcription</p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            disabled={isProcessing}\r\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6\">\r\n          {/* File Selection */}\r\n          <div className=\"mb-6\">\r\n            <div className=\"flex gap-4 mb-4\">\r\n              <div className=\"flex-1\">\r\n                <Label htmlFor=\"defaultDoctor\">Default Doctor Name</Label>\r\n                <Input\r\n                  id=\"defaultDoctor\"\r\n                  value={defaultDoctorName}\r\n                  onChange={(e) => setDefaultDoctorName(e.target.value)}\r\n                  placeholder=\"Dr. Smith\"\r\n                  disabled={isProcessing}\r\n                />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <Label htmlFor=\"defaultType\">Default Document Type</Label>\r\n                <Select\r\n                  value={defaultDocumentType}\r\n                  onValueChange={setDefaultDocumentType}\r\n                  disabled={isProcessing}\r\n                >\r\n                  <SelectTrigger id=\"defaultType\">\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {documentTypes.map(type => (\r\n                      <SelectItem key={type.value} value={type.value}>\r\n                        {type.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </div>\r\n\r\n            <div\r\n              onClick={() => !isProcessing && fileInputRef.current?.click()}\r\n              className={`border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition-colors ${\r\n                isProcessing ? 'opacity-50 cursor-not-allowed' : ''\r\n              }`}\r\n            >\r\n              <Upload className=\"w-12 h-12 text-gray-400 mx-auto mb-3\" />\r\n              <p className=\"text-gray-600 font-medium\">Click to select audio files</p>\r\n              <p className=\"text-sm text-gray-500 mt-1\">MP3, WAV, M4A, OGG (max 100MB each)</p>\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                multiple\r\n                accept=\"audio/*,.mp3,.wav,.m4a,.ogg,.webm\"\r\n                onChange={handleFileSelect}\r\n                className=\"hidden\"\r\n                disabled={isProcessing}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Files List */}\r\n          {files.length > 0 && (\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <h3 className=\"font-semibold text-gray-900\">\r\n                  Files ({files.length})\r\n                  {completedCount > 0 && (\r\n                    <span className=\"ml-2 text-sm text-green-600\">\r\n                      {completedCount} completed\r\n                    </span>\r\n                  )}\r\n                  {failedCount > 0 && (\r\n                    <span className=\"ml-2 text-sm text-red-600\">\r\n                      {failedCount} failed\r\n                    </span>\r\n                  )}\r\n                </h3>\r\n                {failedCount > 0 && !isProcessing && (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"outline\"\r\n                    onClick={retryFailed}\r\n                    className=\"flex items-center gap-2\"\r\n                  >\r\n                    <RotateCcw className=\"w-4 h-4\" />\r\n                    Retry Failed\r\n                  </Button>\r\n                )}\r\n              </div>\r\n\r\n              {files.map((file, index) => (\r\n                <div\r\n                  key={file.id}\r\n                  className={`border rounded-lg p-4 ${\r\n                    file.status === 'failed' ? 'border-red-300 bg-red-50' :\r\n                    file.status === 'completed' ? 'border-green-300 bg-green-50' :\r\n                    file.status === 'processing' || file.status === 'uploading' ? 'border-blue-300 bg-blue-50' :\r\n                    'border-gray-200'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <FileAudio className=\"w-5 h-5 text-gray-400 mt-1 flex-shrink-0\" />\r\n                    \r\n                    <div className=\"flex-1 space-y-2\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <p className=\"font-medium text-gray-900 truncate\">\r\n                          {file.file.name}\r\n                        </p>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          {file.status === 'completed' && (\r\n                            <CheckCircle className=\"w-5 h-5 text-green-600\" />\r\n                          )}\r\n                          {file.status === 'failed' && (\r\n                            <AlertCircle className=\"w-5 h-5 text-red-600\" />\r\n                          )}\r\n                          {(file.status === 'uploading' || file.status === 'processing') && (\r\n                            <Loader2 className=\"w-5 h-5 text-blue-600 animate-spin\" />\r\n                          )}\r\n                          {!isProcessing && file.status !== 'completed' && (\r\n                            <button\r\n                              onClick={() => removeFile(file.id)}\r\n                              className=\"p-1 hover:bg-gray-200 rounded\"\r\n                            >\r\n                              <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {file.status !== 'completed' && (\r\n                        <div className=\"grid grid-cols-3 gap-2\">\r\n                          <Input\r\n                            value={file.doctorName}\r\n                            onChange={(e) => updateFileField(file.id, 'doctorName', e.target.value)}\r\n                            placeholder=\"Doctor name\"\r\n                            disabled={isProcessing}\r\n                            className=\"h-8 text-sm\"\r\n                          />\r\n                          <Input\r\n                            value={file.patientName}\r\n                            onChange={(e) => updateFileField(file.id, 'patientName', e.target.value)}\r\n                            placeholder=\"Patient name\"\r\n                            disabled={isProcessing}\r\n                            className=\"h-8 text-sm\"\r\n                          />\r\n                          <Select\r\n                            value={file.documentType}\r\n                            onValueChange={(value) => updateFileField(file.id, 'documentType', value)}\r\n                            disabled={isProcessing}\r\n                          >\r\n                            <SelectTrigger className=\"h-8 text-sm\">\r\n                              <SelectValue />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                              {documentTypes.map(type => (\r\n                                <SelectItem key={type.value} value={type.value}>\r\n                                  {type.label}\r\n                                </SelectItem>\r\n                              ))}\r\n                            </SelectContent>\r\n                          </Select>\r\n                        </div>\r\n                      )}\r\n\r\n                      {(file.status === 'uploading' || file.status === 'processing') && (\r\n                        <Progress value={file.progress} className=\"h-2\" />\r\n                      )}\r\n\r\n                      {file.error && (\r\n                        <p className=\"text-sm text-red-600\">{file.error}</p>\r\n                      )}\r\n\r\n                      {file.status === 'completed' && (\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          Dr. {file.doctorName} ‚Ä¢ {file.patientName} ‚Ä¢ {\r\n                            documentTypes.find(t => t.value === file.documentType)?.label\r\n                          }\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-6 border-t bg-gray-50\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-4\">\r\n              {isProcessing && (\r\n                <>\r\n                  <Progress value={totalProgress} className=\"w-32\" />\r\n                  <span className=\"text-sm text-gray-600\">\r\n                    Processing {currentProcessingIndex + 1} of {files.length}\r\n                  </span>\r\n                </>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={isProcessing ? cancelUpload : onClose}\r\n                disabled={isProcessing && currentProcessingIndex === -1}\r\n              >\r\n                {isProcessing ? 'Cancel' : 'Close'}\r\n              </Button>\r\n              <Button\r\n                onClick={startBulkUpload}\r\n                disabled={files.length === 0 || isProcessing}\r\n              >\r\n                {isProcessing ? (\r\n                  <>\r\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                    Processing...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Upload className=\"w-4 h-4 mr-2\" />\r\n                    Start Upload ({files.length} files)\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2260, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Omar/Desktop/AI%20website%20Latest/dashboard-next/src/app/dashboard/transcriptionist-workspace.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { \r\n  Upload, \r\n  FileAudio, \r\n  Play,\r\n  Pause,\r\n  SkipBack,\r\n  SkipForward,\r\n  Save,\r\n  Search,\r\n  Loader2,\r\n  Headphones,\r\n  Zap,\r\n  Download,\r\n  RefreshCw,\r\n  AlertCircle,\r\n  CheckCircle2,\r\n  Trash2,\r\n  AlertTriangle,\r\n  FolderUp,\r\n  ChevronUp,\r\n  ChevronDown,\r\n  Keyboard,\r\n  Clock,\r\n  XCircle\r\n} from 'lucide-react'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { \r\n  submitTranscriptionWithUpdates,\r\n  validateAudioFile,\r\n  formatFileSize,\r\n  formatDuration,\r\n  type TranscriptionStatus\r\n} from '@/lib/transcription-service'\r\nimport { uploadAudioToStorage, getSignedAudioUrl } from '@/lib/storage-service'\r\nimport { BulkUploadModal } from '@/components/bulk-upload-modal'\r\n\r\ninterface Transcription {\r\n  id: string\r\n  file_name: string\r\n  doctor_name: string\r\n  patient_name: string\r\n  document_type: string\r\n  transcription_text: string\r\n  audio_url: string\r\n  created_at: string\r\n  status?: 'pending' | 'in_progress' | 'completed' | 'failed' // Make status optional\r\n  file_size?: number\r\n}\r\n\r\nexport default function TranscriptionistWorkspace() {\r\n  // State management\r\n  const [transcriptions, setTranscriptions] = useState<Transcription[]>([])\r\n  const [selectedTranscription, setSelectedTranscription] = useState<Transcription | null>(null)\r\n  const [editingText, setEditingText] = useState('')\r\n  const [loading, setLoading] = useState(true)\r\n  const [saving, setSaving] = useState(false)\r\n  const [uploading, setUploading] = useState(false)\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'pending' | 'in_progress' | 'completed'>('all')\r\n  const [deletingId, setDeletingId] = useState<string | null>(null)\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState<string | null>(null)\r\n  const [showBulkUpload, setShowBulkUpload] = useState(false)\r\n  const [processingIds, setProcessingIds] = useState<Set<string>>(new Set())\r\n  const [lastRefresh, setLastRefresh] = useState<Date>(new Date())\r\n  \r\n  // Audio player state\r\n  const [isPlaying, setIsPlaying] = useState(false)\r\n  const [currentTime, setCurrentTime] = useState(0)\r\n  const [duration, setDuration] = useState(0)\r\n  const [playbackRate, setPlaybackRate] = useState(1)\r\n  \r\n  // File upload state\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\r\n  const [dragActive, setDragActive] = useState(false)\r\n  const [uploadFormData, setUploadFormData] = useState({\r\n    doctorName: '',\r\n    patientName: '',\r\n    documentType: 'consultation'\r\n  })\r\n  \r\n  // Refs\r\n  const audioRef = useRef<HTMLAudioElement>(null)\r\n  const fileInputRef = useRef<HTMLInputElement>(null)\r\n  const textAreaRef = useRef<HTMLTextAreaElement>(null)\r\n\r\n  useEffect(() => {\r\n    fetchTranscriptions()\r\n    \r\n    // Set up automatic refresh for processing transcriptions\r\n    const interval = setInterval(() => {\r\n      if (processingIds.size > 0) {\r\n        console.log('Auto-refreshing for processing transcriptions...')\r\n        fetchTranscriptions()\r\n      }\r\n    }, 5000) // Check every 5 seconds\r\n    \r\n    return () => clearInterval(interval)\r\n  }, [processingIds])\r\n\r\n  useEffect(() => {\r\n    if (selectedTranscription) {\r\n      setEditingText(selectedTranscription.transcription_text || '')\r\n    }\r\n  }, [selectedTranscription])\r\n\r\n  // Keyboard shortcuts for audio control\r\n  useEffect(() => {\r\n    const handleKeyPress = (e: KeyboardEvent) => {\r\n      // Only handle shortcuts when not typing in input/textarea\r\n      const target = e.target as HTMLElement\r\n      if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.tagName === 'SELECT') {\r\n        return\r\n      }\r\n\r\n      if (!selectedTranscription || !audioRef.current) {\r\n        return\r\n      }\r\n\r\n      // Space bar - play/pause\r\n      if (e.code === 'Space') {\r\n        e.preventDefault()\r\n        if (isPlaying) {\r\n          audioRef.current.pause()\r\n        } else {\r\n          audioRef.current.play()\r\n        }\r\n        setIsPlaying(!isPlaying)\r\n      }\r\n      \r\n      // Arrow keys - skip forward/backward\r\n      if (e.code === 'ArrowLeft') {\r\n        e.preventDefault()\r\n        audioRef.current.currentTime = Math.max(0, audioRef.current.currentTime - 10)\r\n      }\r\n      \r\n      if (e.code === 'ArrowRight') {\r\n        e.preventDefault()\r\n        audioRef.current.currentTime = Math.min(audioRef.current.duration || 0, audioRef.current.currentTime + 10)\r\n      }\r\n\r\n      // Number keys 1-6 for speed control\r\n      const speedMap: { [key: string]: number } = {\r\n        'Digit1': 0.5,\r\n        'Digit2': 0.75,\r\n        'Digit3': 1,\r\n        'Digit4': 1.25,\r\n        'Digit5': 1.5,\r\n        'Digit6': 2\r\n      }\r\n      \r\n      if (speedMap[e.code]) {\r\n        e.preventDefault()\r\n        const newRate = speedMap[e.code]\r\n        setPlaybackRate(newRate)\r\n        audioRef.current.playbackRate = newRate\r\n      }\r\n    }\r\n\r\n    window.addEventListener('keydown', handleKeyPress)\r\n    return () => window.removeEventListener('keydown', handleKeyPress)\r\n  }, [selectedTranscription, isPlaying])\r\n\r\n  const fetchTranscriptions = async (showLoadingState = true) => {\r\n    try {\r\n      if (showLoadingState) {\r\n        setLoading(true)\r\n      }\r\n      \r\n      const { data, error } = await supabase\r\n        .from('transcriptions')\r\n        .select('*')\r\n        .order('created_at', { ascending: false })\r\n\r\n      if (error) {\r\n        console.error('Database error:', error)\r\n      }\r\n      \r\n      // Track which transcriptions are processing\r\n      const newProcessingIds = new Set<string>()\r\n      \r\n      // Compute status with transcription_text taking precedence\r\n      const transcriptionsWithStatus = (data || []).map(t => {\r\n        let computedStatus: 'pending' | 'in_progress' | 'completed' | 'failed'\r\n        \r\n        if (t.transcription_text && String(t.transcription_text).trim() !== '') {\r\n          // If we have text, it's completed regardless of a stale status column\r\n          computedStatus = 'completed'\r\n        } else if (t.status) {\r\n          computedStatus = t.status\r\n        } else {\r\n          computedStatus = 'pending'\r\n        }\r\n        \r\n        // Track processing items\r\n        if (computedStatus === 'in_progress' || computedStatus === 'pending') {\r\n          newProcessingIds.add(t.id)\r\n        }\r\n        \r\n        return {\r\n          ...t,\r\n          status: computedStatus\r\n        }\r\n      })\r\n      \r\n      setTranscriptions(transcriptionsWithStatus)\r\n      setProcessingIds(newProcessingIds)\r\n      setLastRefresh(new Date())\r\n    } catch (error) {\r\n      console.error('Error fetching transcriptions:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (file) {\r\n      setSelectedFile(file)\r\n    }\r\n  }\r\n\r\n  const handleDrag = (e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\r\n      setDragActive(true)\r\n    } else if (e.type === \"dragleave\") {\r\n      setDragActive(false)\r\n    }\r\n  }\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    setDragActive(false)\r\n    \r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      setSelectedFile(e.dataTransfer.files[0])\r\n    }\r\n  }\r\n\r\n  const handleUpload = async () => {\r\n    if (!selectedFile) return\r\n    \r\n    // Validate file\r\n    const validation = validateAudioFile(selectedFile)\r\n    if (!validation.valid) {\r\n      alert(validation.error)\r\n      return\r\n    }\r\n    \r\n    // Check required fields\r\n    if (!uploadFormData.doctorName || !uploadFormData.patientName) {\r\n      alert('Please fill in doctor and patient names')\r\n      return\r\n    }\r\n    \r\n    setUploading(true)\r\n    \r\n    // Optimistically add to list with pending status\r\n    const optimisticTranscription: Transcription = {\r\n      id: `temp-${Date.now()}`,\r\n      file_name: selectedFile.name,\r\n      doctor_name: uploadFormData.doctorName,\r\n      patient_name: uploadFormData.patientName,\r\n      document_type: uploadFormData.documentType,\r\n      transcription_text: '',\r\n      audio_url: URL.createObjectURL(selectedFile), // Use local URL for optimistic playback\r\n      created_at: new Date().toISOString(),\r\n      status: 'pending',\r\n      file_size: selectedFile.size\r\n    }\r\n    \r\n    setTranscriptions(prev => [optimisticTranscription, ...prev])\r\n    \r\n    try {\r\n      // Submit with real-time updates\r\n      const response = await submitTranscriptionWithUpdates(\r\n        {\r\n          audioFile: selectedFile,\r\n          doctorName: uploadFormData.doctorName,\r\n          patientName: uploadFormData.patientName,\r\n          documentType: uploadFormData.documentType\r\n        },\r\n        async (status: TranscriptionStatus) => {\r\n          console.log('Real-time status update:', status)\r\n          \r\n          // Update the transcription in the list with real-time status\r\n          setTranscriptions(prev => prev.map(t => {\r\n            if (t.id === optimisticTranscription.id || t.id === status.id) {\r\n              return {\r\n                ...t,\r\n                id: status.id,\r\n                status: status.status,\r\n                transcription_text: status.transcription_text || t.transcription_text,\r\n                audio_url: status.audio_url || t.audio_url,\r\n              }\r\n            }\r\n            return t\r\n          }))\r\n\r\n          // If completed, get signed URL for playback\r\n          if (status.status === 'completed' && status.audio_url) {\r\n            const signedUrl = await getSignedAudioUrl(status.audio_url)\r\n            if (signedUrl.url) {\r\n              setTranscriptions(prev => prev.map(t => \r\n                t.id === status.id ? { ...t, audio_url: signedUrl.url! } : t\r\n              ))\r\n            }\r\n          }\r\n          \r\n          // If completed, refresh to get full data\r\n          if (status.status === 'completed' || status.status === 'failed') {\r\n            fetchTranscriptions()\r\n          }\r\n        }\r\n      )\r\n      \r\n      if (response.success && response.transcriptionId) {\r\n        // Update optimistic entry with real ID\r\n        setTranscriptions(prev => prev.map(t => \r\n          t.id === optimisticTranscription.id \r\n            ? { ...t, id: response.transcriptionId! }\r\n            : t\r\n        ))\r\n        \r\n        // Clear form immediately for better UX\r\n        setSelectedFile(null)\r\n        setUploadFormData({ doctorName: '', patientName: '', documentType: 'consultation' })\r\n        setUploading(false)\r\n        \r\n        // Show non-blocking success message\r\n        console.log(`‚úÖ Transcription submitted: ${response.transcriptionId}`)\r\n      } else {\r\n        // Remove optimistic entry on failure\r\n        setTranscriptions(prev => prev.filter(t => t.id !== optimisticTranscription.id))\r\n        throw new Error(response.error || 'Failed to submit transcription')\r\n      }\r\n    } catch (error) {\r\n      // Remove optimistic entry on error\r\n      setTranscriptions(prev => prev.filter(t => t.id !== optimisticTranscription.id))\r\n      console.error('Upload error:', error)\r\n      alert(`Failed to upload: ${error instanceof Error ? error.message : 'Unknown error'}`)\r\n      setUploading(false)\r\n    }\r\n  }\r\n\r\n  const handleDelete = async (id: string) => {\r\n    try {\r\n      setDeletingId(id)\r\n      \r\n      // Get auth token\r\n      const { data: { session } } = await supabase.auth.getSession()\r\n      if (!session) {\r\n        throw new Error('Not authenticated')\r\n      }\r\n\r\n      const response = await fetch(`/api/transcriptions/${id}/delete`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${session.access_token}`,\r\n        },\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to delete transcription')\r\n      }\r\n\r\n      // Remove from local state\r\n      setTranscriptions(prev => prev.filter(t => t.id !== id))\r\n      if (selectedTranscription?.id === id) {\r\n        setSelectedTranscription(null)\r\n      }\r\n      \r\n      // Reset confirmation\r\n      setShowDeleteConfirm(null)\r\n      \r\n      console.log('Transcription deleted successfully')\r\n    } catch (error) {\r\n      console.error('Failed to delete transcription:', error)\r\n      alert('Failed to delete transcription. Please try again.')\r\n    } finally {\r\n      setDeletingId(null)\r\n    }\r\n  }\r\n\r\n  const handleSaveTranscription = async () => {\r\n    if (!selectedTranscription) return\r\n    \r\n    setSaving(true)\r\n    try {\r\n      const newStatus: 'completed' | 'pending' = (editingText && editingText.trim() !== '') ? 'completed' : 'pending'\r\n\r\n      const { error } = await supabase\r\n        .from('transcriptions')\r\n        .update({ \r\n          transcription_text: editingText,\r\n          status: newStatus,\r\n        })\r\n        .eq('id', selectedTranscription.id)\r\n\r\n      if (error) throw error\r\n      \r\n      // Update local state with computed status\r\n      setTranscriptions(prev => \r\n        prev.map(t => t.id === selectedTranscription.id \r\n          ? { ...t, transcription_text: editingText, status: newStatus as 'completed' | 'pending' }\r\n          : t\r\n        )\r\n      )\r\n      setSelectedTranscription(prev => \r\n        prev ? { ...prev, transcription_text: editingText, status: newStatus as 'completed' | 'pending' } : null\r\n      )\r\n      \r\n      alert('Transcription saved successfully!')\r\n    } catch (error) {\r\n      console.error('Error saving transcription:', error)\r\n      alert('Failed to save transcription')\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  const togglePlayPause = () => {\r\n    if (!audioRef.current) return\r\n    \r\n    if (isPlaying) {\r\n      audioRef.current.pause()\r\n    } else {\r\n      audioRef.current.play()\r\n    }\r\n    setIsPlaying(!isPlaying)\r\n  }\r\n\r\n  const skipBackward = () => {\r\n    if (audioRef.current) {\r\n      audioRef.current.currentTime = Math.max(0, audioRef.current.currentTime - 10)\r\n    }\r\n  }\r\n\r\n  const skipForward = () => {\r\n    if (audioRef.current) {\r\n      audioRef.current.currentTime = Math.min(duration, audioRef.current.currentTime + 10)\r\n    }\r\n  }\r\n\r\n  const changePlaybackRate = () => {\r\n    const rates = [0.5, 0.75, 1, 1.25, 1.5, 2]\r\n    const currentIndex = rates.indexOf(playbackRate)\r\n    const nextIndex = (currentIndex + 1) % rates.length\r\n    const newRate = rates[nextIndex]\r\n    \r\n    setPlaybackRate(newRate)\r\n    if (audioRef.current) {\r\n      audioRef.current.playbackRate = newRate\r\n    }\r\n  }\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60)\r\n    const secs = Math.floor(seconds % 60)\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`\r\n  }\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'completed': return 'text-green-600 bg-green-50'\r\n      case 'in_progress': return 'text-yellow-600 bg-yellow-50'\r\n      case 'pending': return 'text-blue-600 bg-blue-50'\r\n      case 'failed': return 'text-red-600 bg-red-50'\r\n      default: return 'text-gray-600 bg-gray-50'\r\n    }\r\n  }\r\n  \r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'completed': return <CheckCircle2 className=\"h-3 w-3\" />\r\n      case 'in_progress': return <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n      case 'pending': return <Clock className=\"h-3 w-3\" />\r\n      case 'failed': return <XCircle className=\"h-3 w-3\" />\r\n      default: return null\r\n    }\r\n  }\r\n\r\n  const filteredTranscriptions = transcriptions.filter(t => {\r\n    const matchesSearch = t.file_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                          t.doctor_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                          t.patient_name?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    const matchesStatus = statusFilter === 'all' || t.status === statusFilter\r\n    return matchesSearch && matchesStatus\r\n  })\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background p-4\">\r\n      <div className=\"max-w-7xl mx-auto space-y-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold\">Transcriptionist Workspace</h1>\r\n            <p className=\"text-muted-foreground\">Upload, transcribe, and edit medical dictations</p>\r\n          </div>\r\n          <div className=\"flex gap-2 items-center\">\r\n            {processingIds.size > 0 && (\r\n              <div className=\"flex items-center gap-2 px-3 py-1.5 bg-yellow-50 text-yellow-700 rounded-md text-sm\">\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                <span>{processingIds.size} processing...</span>\r\n              </div>\r\n            )}\r\n            <Button variant=\"outline\" onClick={() => fetchTranscriptions(false)}>\r\n              <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n              Refresh\r\n            </Button>\r\n            <Button variant=\"outline\" onClick={() => setShowBulkUpload(true)}>\r\n              <FolderUp className=\"h-4 w-4 mr-2\" />\r\n              Bulk Upload\r\n            </Button>\r\n            <Button onClick={() => fileInputRef.current?.click()}>\r\n              <Upload className=\"h-4 w-4 mr-2\" />\r\n              Upload Audio\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Content Grid */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n          {/* Left Column - File List & Upload */}\r\n          <div className=\"lg:col-span-1 space-y-4\">\r\n            {/* Upload Section */}\r\n            <Card>\r\n              <CardHeader className=\"pb-3\">\r\n                <CardTitle className=\"text-lg\">Quick Upload</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-3\">\r\n                <div className=\"space-y-2\">\r\n                  <Input \r\n                    placeholder=\"Doctor Name\"\r\n                    value={uploadFormData.doctorName}\r\n                    onChange={(e) => setUploadFormData(prev => ({ ...prev, doctorName: e.target.value }))}\r\n                  />\r\n                  <Input \r\n                    placeholder=\"Patient Name\"\r\n                    value={uploadFormData.patientName}\r\n                    onChange={(e) => setUploadFormData(prev => ({ ...prev, patientName: e.target.value }))}\r\n                  />\r\n                  <select \r\n                    className=\"w-full h-9 px-3 rounded-md border border-input bg-background\"\r\n                    value={uploadFormData.documentType}\r\n                    onChange={(e) => setUploadFormData(prev => ({ ...prev, documentType: e.target.value }))}\r\n                  >\r\n                    <option value=\"consultation\">Consultation</option>\r\n                    <option value=\"surgery\">Surgery Report</option>\r\n                    <option value=\"discharge\">Discharge Summary</option>\r\n                    <option value=\"progress\">Progress Note</option>\r\n                  </select>\r\n                </div>\r\n                \r\n                <div \r\n                  className={`border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors ${\r\n                    dragActive ? 'border-primary bg-primary/5' : 'border-border hover:border-primary/50'\r\n                  } ${selectedFile ? 'bg-primary/5' : ''}`}\r\n                  onDragEnter={handleDrag}\r\n                  onDragLeave={handleDrag}\r\n                  onDragOver={handleDrag}\r\n                  onDrop={handleDrop}\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                >\r\n                  <input \r\n                    ref={fileInputRef}\r\n                    type=\"file\" \r\n                    className=\"hidden\" \r\n                    accept=\"audio/*\"\r\n                    onChange={handleFileSelect}\r\n                  />\r\n                  {selectedFile ? (\r\n                    <div className=\"space-y-2\">\r\n                      <FileAudio className=\"h-8 w-8 mx-auto text-primary\" />\r\n                      <p className=\"text-sm font-medium\">{selectedFile.name}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        {formatFileSize(selectedFile.size)}\r\n                      </p>\r\n                    </div>\r\n                  ) : (\r\n                    <>\r\n                      <Upload className=\"h-8 w-8 mx-auto text-muted-foreground mb-2\" />\r\n                      <p className=\"text-sm text-muted-foreground\">\r\n                        Drop audio file or click to browse\r\n                      </p>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                \r\n                {selectedFile && (\r\n                  <Button \r\n                    className=\"w-full\" \r\n                    onClick={handleUpload}\r\n                    disabled={uploading}\r\n                  >\r\n                    {uploading ? (\r\n                      <>\r\n                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                        Uploading...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Zap className=\"h-4 w-4 mr-2\" />\r\n                        Process with AI\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Transcription List */}\r\n            <Card>\r\n              <CardHeader className=\"pb-3\">\r\n                <CardTitle className=\"text-lg\">Transcriptions</CardTitle>\r\n                <div className=\"flex gap-2 mt-2\">\r\n                  <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                    <Input \r\n                      placeholder=\"Search...\" \r\n                      className=\"pl-8\"\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <select \r\n                    className=\"px-3 rounded-md border border-input bg-background text-sm\"\r\n                    value={statusFilter}\r\n                    onChange={(e) => setStatusFilter(e.target.value as 'all' | 'pending' | 'in_progress' | 'completed')}\r\n                  >\r\n                    <option value=\"all\">All</option>\r\n                    <option value=\"pending\">Pending</option>\r\n                    <option value=\"in_progress\">In Progress</option>\r\n                    <option value=\"completed\">Completed</option>\r\n                  </select>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"p-0\">\r\n                <div className=\"max-h-[500px] overflow-y-auto\">\r\n                  {filteredTranscriptions.map((transcription) => (\r\n                    <div\r\n                      key={transcription.id}\r\n                      className={`relative group border-b cursor-pointer hover:bg-accent/50 transition-colors ${\r\n                        selectedTranscription?.id === transcription.id ? 'bg-accent' : ''\r\n                      }`}\r\n                    >\r\n                      <div \r\n                        onClick={() => setSelectedTranscription(transcription)}\r\n                        className=\"p-3 pr-10\"\r\n                      >\r\n                        <div className=\"flex items-start justify-between gap-2\">\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <p className=\"font-medium text-sm truncate\">\r\n                              {transcription.file_name || 'Untitled'}\r\n                            </p>\r\n                              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                                Dr. {transcription.doctor_name} ‚Ä¢ {transcription.patient_name}\r\n                              </p>\r\n                              <div className=\"flex items-center gap-2 mt-1\">\r\n                                <p className=\"text-xs text-muted-foreground\">\r\n                                  {new Date(transcription.created_at).toLocaleDateString()}\r\n                                </p>\r\n                                <span className={`flex items-center gap-1 text-xs px-2 py-0.5 rounded-full ${getStatusColor(transcription.status)}`}>\r\n                                  {getStatusIcon(transcription.status)}\r\n                                  {transcription.status === 'in_progress' ? 'Processing' : transcription.status}\r\n                                </span>\r\n                              </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {/* Delete button - positioned absolutely */}\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation()\r\n                          setShowDeleteConfirm(transcription.id)\r\n                        }}\r\n                        className=\"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-200 p-1.5 rounded-md hover:bg-destructive/10\"\r\n                        title=\"Delete transcription\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4 text-muted-foreground hover:text-destructive transition-colors\" />\r\n                      </button>\r\n                      \r\n                      {/* Delete confirmation dialog - overlay style */}\r\n                      {showDeleteConfirm === transcription.id && (\r\n                        <div className=\"absolute inset-0 bg-background/95 backdrop-blur-sm rounded z-10 flex items-center justify-center p-3\">\r\n                          <div className=\"w-full max-w-xs\">\r\n                            <div className=\"flex items-center gap-2 mb-2 text-destructive\">\r\n                              <AlertTriangle className=\"h-4 w-4 flex-shrink-0\" />\r\n                              <span className=\"font-semibold text-sm\">Delete Transcription?</span>\r\n                            </div>\r\n                            <p className=\"text-xs text-muted-foreground mb-3\">\r\n                              This action cannot be undone.\r\n                            </p>\r\n                            <div className=\"flex gap-2\">\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"destructive\"\r\n                                onClick={(e) => {\r\n                                  e.stopPropagation()\r\n                                  handleDelete(transcription.id)\r\n                                }}\r\n                                disabled={deletingId === transcription.id}\r\n                                className=\"flex-1 h-8 text-xs\"\r\n                              >\r\n                                {deletingId === transcription.id ? (\r\n                                  <>\r\n                                    <Loader2 className=\"h-3 w-3 animate-spin mr-1\" />\r\n                                    Deleting\r\n                                  </>\r\n                                ) : (\r\n                                  'Delete'\r\n                                )}\r\n                              </Button>\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                onClick={(e) => {\r\n                                  e.stopPropagation()\r\n                                  setShowDeleteConfirm(null)\r\n                                }}\r\n                                className=\"flex-1 h-8 text-xs\"\r\n                              >\r\n                                Cancel\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Right Column - Editor & Player */}\r\n          <div className=\"lg:col-span-2 space-y-4\">\r\n            {selectedTranscription ? (\r\n              <>\r\n                {/* Audio Player */}\r\n                <Card>\r\n                  <CardContent className=\"p-4\">\r\n                    <div className=\"space-y-4\">\r\n                      {/* Player Info */}\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <h3 className=\"font-semibold\">{selectedTranscription.file_name}</h3>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            Dr. {selectedTranscription.doctor_name} ‚Ä¢ {selectedTranscription.patient_name}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                          {/* Speed control buttons */}\r\n                          <div className=\"flex items-center gap-1 bg-muted/50 rounded-md p-1\">\r\n                            <button\r\n                              onClick={() => {\r\n                                const speeds = [0.5, 0.75, 1, 1.25, 1.5, 2]\r\n                                const currentIndex = speeds.indexOf(playbackRate)\r\n                                if (currentIndex > 0) {\r\n                                  const newRate = speeds[currentIndex - 1]\r\n                                  setPlaybackRate(newRate)\r\n                                  if (audioRef.current) audioRef.current.playbackRate = newRate\r\n                                }\r\n                              }}\r\n                              className=\"p-1 hover:bg-background rounded transition-colors disabled:opacity-50\"\r\n                              disabled={playbackRate <= 0.5}\r\n                              title=\"Decrease speed\"\r\n                            >\r\n                              <ChevronDown className=\"h-3 w-3\" />\r\n                            </button>\r\n                            <span className=\"px-2 text-sm font-medium min-w-[3rem] text-center\">\r\n                              {playbackRate}x\r\n                            </span>\r\n                            <button\r\n                              onClick={() => {\r\n                                const speeds = [0.5, 0.75, 1, 1.25, 1.5, 2]\r\n                                const currentIndex = speeds.indexOf(playbackRate)\r\n                                if (currentIndex < speeds.length - 1) {\r\n                                  const newRate = speeds[currentIndex + 1]\r\n                                  setPlaybackRate(newRate)\r\n                                  if (audioRef.current) audioRef.current.playbackRate = newRate\r\n                                }\r\n                              }}\r\n                              className=\"p-1 hover:bg-background rounded transition-colors disabled:opacity-50\"\r\n                              disabled={playbackRate >= 2}\r\n                              title=\"Increase speed\"\r\n                            >\r\n                              <ChevronUp className=\"h-3 w-3\" />\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Audio Element */}\r\n                      {selectedTranscription.audio_url && (\r\n                        <audio\r\n                          ref={audioRef}\r\n                          src={selectedTranscription.audio_url}\r\n                          onTimeUpdate={(e) => setCurrentTime(e.currentTarget.currentTime)}\r\n                          onLoadedMetadata={(e) => setDuration(e.currentTarget.duration)}\r\n                          onEnded={() => setIsPlaying(false)}\r\n                        />\r\n                      )}\r\n\r\n                      {/* Progress Bar */}\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"relative h-2 bg-secondary rounded-full overflow-hidden\">\r\n                          <div \r\n                            className=\"absolute h-full bg-primary transition-all\"\r\n                            style={{ width: `${(currentTime / duration) * 100 || 0}%` }}\r\n                          />\r\n                        </div>\r\n                        <div className=\"flex justify-between text-xs text-muted-foreground\">\r\n                          <span>{formatTime(currentTime)}</span>\r\n                          <span>{formatTime(duration)}</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Player Controls */}\r\n                      <div className=\"space-y-3\">\r\n                        <div className=\"flex items-center justify-center gap-2\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"icon\"\r\n                            onClick={skipBackward}\r\n                            title=\"Skip back 10s (‚Üê)\"\r\n                          >\r\n                            <SkipBack className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          <Button\r\n                            size=\"icon\"\r\n                            onClick={togglePlayPause}\r\n                            title=\"Play/Pause (Space)\"\r\n                          >\r\n                            {isPlaying ? <Pause className=\"h-4 w-4\" /> : <Play className=\"h-4 w-4\" />}\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"icon\"\r\n                            onClick={skipForward}\r\n                            title=\"Skip forward 10s (‚Üí)\"\r\n                          >\r\n                            <SkipForward className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </div>\r\n                        \r\n                        {/* Keyboard shortcuts hint */}\r\n                        <div className=\"flex items-center justify-center gap-2 text-xs text-muted-foreground\">\r\n                          <Keyboard className=\"h-3 w-3\" />\r\n                          <span>Space: Play/Pause ‚Ä¢ ‚Üê‚Üí: Skip 10s ‚Ä¢ 1-6: Speed</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Transcription Editor */}\r\n                <Card className=\"flex-1\">\r\n                  <CardHeader className=\"pb-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <CardTitle className=\"text-lg\">Transcription Editor</CardTitle>\r\n                      <div className=\"flex gap-2\">\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                        >\r\n                          <Download className=\"h-4 w-4 mr-1\" />\r\n                          Export\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          onClick={handleSaveTranscription}\r\n                          disabled={saving}\r\n                        >\r\n                          {saving ? (\r\n                            <>\r\n                              <Loader2 className=\"h-4 w-4 mr-1 animate-spin\" />\r\n                              Saving...\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <Save className=\"h-4 w-4 mr-1\" />\r\n                              Save\r\n                            </>\r\n                          )}\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <textarea\r\n                      ref={textAreaRef}\r\n                      className=\"w-full h-[400px] p-3 rounded-md border border-input bg-background resize-none focus:outline-none focus:ring-2 focus:ring-primary\"\r\n                      value={editingText}\r\n                      onChange={(e) => setEditingText(e.target.value)}\r\n                      placeholder=\"Transcription text will appear here...\"\r\n                    />\r\n                    <div className=\"flex justify-between mt-2 text-xs text-muted-foreground\">\r\n                      <span>Words: {editingText.split(/\\s+/).filter(w => w).length}</span>\r\n                      <span>Characters: {editingText.length}</span>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </>\r\n            ) : (\r\n              <Card className=\"h-full flex items-center justify-center\">\r\n                <CardContent className=\"text-center py-12\">\r\n                  <Headphones className=\"h-12 w-12 mx-auto text-muted-foreground mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold mb-2\">No Transcription Selected</h3>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Select a transcription from the list or upload a new audio file to get started\r\n                  </p>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Bulk Upload Modal */}\r\n      <BulkUploadModal\r\n        isOpen={showBulkUpload}\r\n        onClose={() => setShowBulkUpload(false)}\r\n        onComplete={() => {\r\n          setShowBulkUpload(false)\r\n          fetchTranscriptions()\r\n        }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}